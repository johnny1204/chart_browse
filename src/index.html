<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./node_modules/jquery/dist/jquery.slim.min.js"></script>
    <!-- <script>
        $(()=>{$("#calendar").attr("src",`/carendar?path=${encodeURIComponent("action=tp4&sa=schedule")}`),$("#close").on("click",()=>{$.ajax("close"),$("#calendar").attr("src",""),alert("\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002")})}),document.addEventListener("DOMContentLoaded",a=>{document.getElementById("calendar").onload=()=>{let a=document.getElementById("calendar").contentWindow.document.querySelectorAll("a");Array.from(a).forEach(a=>a.addEventListener("click",a=>{a.preventDefault();let b=a.currentTarget.getAttribute("href");if(-1!==b.indexOf("index.php?")){let c=b.split("?")[1];$("#calendar").attr("src",`/carendar?path=${encodeURIComponent(c)}`)}}));let b=document.getElementById("calendar").contentWindow.document.querySelectorAll("#str-main > table > tbody > tr > td:nth-child(1) > a");Array.from(b).forEach(a=>a.addEventListener("click",a=>{$("#first").attr("src",`https://www.nikkei.com/nkd/company/chart/?type=3month&scode=${a.currentTarget.innerText}&ba=1#JSID_chart`),$("#second").attr("src",`https://kabuyoho.jp/reportTop?bcode=${a.currentTarget.innerText}`)}))}})
    </script> -->
    <script>
        window.jQuery = window.$ = require('jquery');
        $(() => {
            $("#calendar").attr('src', `/carendar?path=${encodeURIComponent('action=tp4&sa=schedule')}`);
        });


        document.addEventListener('DOMContentLoaded', event => {
            document.getElementById('calendar').onload = () => {
                const aElem = document.getElementById('calendar').contentWindow.document.querySelectorAll('a');
                Array.from(aElem).forEach(link => link.addEventListener(
                    'click', (event) => {
                        event.preventDefault();
                        const href = event.currentTarget.getAttribute('href');
                        if (href.indexOf("index.php?") !== -1) {
                            const path = href.split('?')[1];
                            $("#calendar").attr('src', `/carendar?path=${encodeURIComponent(path)}`);
                        }
                    })
                );

                const codeElem = document.getElementById('calendar').contentWindow.document.querySelectorAll('#str-main > table > tbody > tr > td:nth-child(1) > a');
                Array.from(codeElem).forEach(link => link.addEventListener(
                    'click', (event) => {
                        $("#first").attr('src', `https://www.rakuten-sec.co.jp/web/market/search/chart.html?ric=${event.currentTarget.innerText}.T#ifr`);
                        $("#second").attr('src', `https://kabuyoho.jp/reportTop?bcode=${event.currentTarget.innerText}`);
                    })
                );
            };
        });
    </script>
</head>
<body>
    <div style="display: flex;">
        <div style="width:50%;height:750px;">
            <iframe id="calendar" width="100%" height="100%"></iframe>
        </div>
        <div style="width:50%;height:750px;">
            <div style="height:50%;">
                <iframe id="first" width="100%" height="100%"></iframe>
            </div>
            <div style="height:50%;margin-top: 10px;">
                <iframe id="second" width="100%" height="100%"></iframe>
            </div>
        </div>
    </div>
</body>
</html>